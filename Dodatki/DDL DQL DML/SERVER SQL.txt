

begin tran 
CREATE TABLE BIURA
  (
    ID_BIURA INTEGER NOT NULL ,
    NAZWA    VARCHAR (30) ,
    ADRES    VARCHAR (255) NOT NULL
  ) ;
ALTER TABLE BIURA ADD CONSTRAINT BIURO_PK PRIMARY KEY ( ID_BIURA ) ;


CREATE TABLE KIERUNKI
  (
    ID_KIERUNKU    INTEGER NOT NULL ,
    NAZWA_KIERUNKU VARCHAR (30) NOT NULL ,
    TYP_STUDIOW    CHAR (15) NOT NULL ,
    CZAS_TRWANIA NUMERIC (4,2) NOT NULL
  ) ;
ALTER TABLE KIERUNKI ADD CONSTRAINT KIERUNEK_PK PRIMARY KEY ( ID_KIERUNKU ) ;


CREATE TABLE PRACOWNICY
  (
    ID_PRACOWNIKA INTEGER NOT NULL ,
    IMIE          VARCHAR (25) NOT NULL ,
    NAZWISKO      VARCHAR (25) NOT NULL ,
    PENSJA FLOAT (10) NOT NULL ,
    DATA_ZATRUDNIENIA DATE DEFAULT SYSDATETIME(),
    ID_BIURA          INTEGER NOT NULL ,
    ID_PRZELOZONEGO   INTEGER 
  ) ;
ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNIK_PK PRIMARY KEY ( ID_PRACOWNIKA ) ;


CREATE TABLE PRZEDMIOTY
  (
    ID_PRZEDMIOTU INTEGER NOT NULL ,
    NAZWA         VARCHAr (30) NOT NULL ,
    OPIS  TEXT ,
    ILOSC   NUMERIC (4) NOT NULL ,
    ID_SALI INTEGER NOT NULL
  ) ;
ALTER TABLE PRZEDMIOTY ADD CONSTRAINT PRZEDMIOT_PK PRIMARY KEY ( ID_PRZEDMIOTU ) ;


CREATE TABLE REZERWACJE
  (
    ID_REZERWACJI INTEGER NOT NULL ,
    REZERWACJA_OD DATE DEFAULT SYSDATETIME()  NOT NULL,
    REZERWACJA_DO DATE ,
    CENA FLOAT (10) NOT NULL ,
    NR_ALBUMU     INTEGER NOT NULL ,
    ID_SALI       INTEGER NOT NULL ,
    ID_PRACOWNIKA INTEGER NOT NULL
  ) ;
ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_PK PRIMARY KEY ( ID_REZERWACJI ) ;


CREATE TABLE SALE
  (
    ID_SALI INTEGER NOT NULL ,
    NAZWA   VARCHAR (30) NOT NULL ,
    OPIS TEXT
  ) ;
ALTER TABLE SALE ADD CONSTRAINT SALA_PK PRIMARY KEY ( ID_SALI ) ;


CREATE TABLE STUDENCI
  (
    NR_ALBUMU   INTEGER NOT NULL ,
    IMIE        VARCHAR (30) NOT NULL ,
    NAZWISKO    VARCHAR (30) NOT NULL ,
    NR_TELEFONU numeric (9) NOT NULL ,
    KIERUNEK_ID INTEGER NOT NULL
  ) ;

ALTER TABLE STUDENCI ADD CONSTRAINT STUDENT_PK PRIMARY KEY ( NR_ALBUMU ) ;

ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNIK_BIURO_FK FOREIGN KEY ( ID_BIURA ) REFERENCES BIURA ( ID_BIURA ) ;

ALTER TABLE PRACOWNICY ADD CONSTRAINT PRACOWNIK_PRACOWNIK_FK FOREIGN KEY ( ID_PRZELOZONEGO ) REFERENCES PRACOWNICY ( ID_PRACOWNIKA ) ;

ALTER TABLE PRZEDMIOTY ADD CONSTRAINT PRZEDMIOT_SALA_FK FOREIGN KEY ( ID_SALI ) REFERENCES SALE ( ID_SALI ) ;

ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_PRACOWNIK_FK FOREIGN KEY ( ID_PRACOWNIKA ) REFERENCES PRACOWNICY ( ID_PRACOWNIKA ) ;

ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_SALA_FK FOREIGN KEY ( ID_SALI ) REFERENCES SALE ( ID_SALI ) ;

ALTER TABLE REZERWACJE ADD CONSTRAINT REZERWACJE_STUDENT_FK FOREIGN KEY ( NR_ALBUMU ) REFERENCES STUDENCI ( NR_ALBUMU ) ;

ALTER TABLE STUDENCI ADD CONSTRAINT STUDENT_KIERUNEK_FK FOREIGN KEY ( KIERUNEK_ID ) REFERENCES KIERUNKI ( ID_KIERUNKU ) ;
commit;